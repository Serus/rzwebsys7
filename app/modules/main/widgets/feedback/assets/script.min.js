(function(a){a.fn.feedbackWidget=function(b){return this.each(function(){var d=a(this);var c=false;d.find("form").on("submit",function(){var e=a(this);var f=e.data("yiiActiveForm");f.settings.beforeSubmit=function(){e.trigger("beforeSubmit")};return false});d.find("form").on("beforeSubmit",function(l){l.preventDefault();if(c){return}c=true;var i=a(this),j=i.serialize(),k=d.find(".feedback-success"),g=d.find(".feedback-error");var f=function(){k.hide();g.show()};var m=function(){k.show();g.hide();i.trigger("reset");var e=i.yiiActiveForm("data");e.validated=false;setTimeout(function(){k.hide();g.hide()},5000)};var h=a.ajax({url:b,data:j,method:"POST",dataType:"json",success:function(n,e,o){if(o.status==201){m()}else{f()}},error:f});h.always(function(){c=false})})})}})(jQuery);